{"mappings":"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","sources":["src/index.js"],"sourcesContent":["const userList = document.getElementById('users');\r\nconst API_URL = 'https://jsonplaceholder.typicode.com';\r\nlet users = [];\r\nlet formData = {\r\n  name: '',\r\n  username: '',\r\n  address: '',\r\n  phone: '',\r\n  website: '',\r\n  email: ''\r\n};\r\nlet editableCardId;\r\nlet editableUserIdx;\r\nlet updateValues = {};\r\nconst formWrapper = document.querySelector('.edit-form-wrapper');\r\nconst form = document.querySelector('.edit-form');\r\nconst editBtn = document.querySelector('.edit-btn');\r\nconst loader = document.querySelector('.loader');\r\n\r\nasync function getUsers() {\r\n  const url = `${API_URL}/users`;\r\n  const response = await fetch(url);\r\n  if (response.ok) {\r\n    return await response.json();\r\n  }\r\n}\r\n\r\nasync function startApp() {\r\n  loader.classList.add('show-loader');\r\n  const data = await getUsers();\r\n  users = [...users, ...data];\r\n  renderUsers(users);\r\n  loader.classList.remove('show-loader');\r\n}\r\n\r\nfunction renderUsers(list) {\r\n  const markupArray = list.map(\r\n    ({ id, name, username, phone, website, email }) => {\r\n      return `<li class=\"profile\">\r\n        <div class=\"description\">\r\n          <p class=\"name\">${name}</p>\r\n          <p class=\"tag\">@${username}</p>\r\n         \r\n        </div>\r\n\r\n        <ul class=\"contacts\">\r\n          <li class=\"statsElem\">\r\n            <span class=\"label\">phone</span>\r\n            <span class=\"quantity\">${phone}</span>\r\n          </li>\r\n          <li class=\"statsElem\">\r\n            <span class=\"label\">website</span>\r\n            <span class=\"quantity\">${website}</span>\r\n          </li>\r\n          <li class=\"statsElem\">\r\n            <span class=\"label\">email</span>\r\n            <span class=\"quantity\">${email}</span>\r\n          </li>\r\n        </ul>\r\n        <ul class=\"controls\">\r\n        <li ><button class=\"btn tomato\" onclick=\"editCard(${id})\">EDIT</button></li>\r\n        <li ><button class=\"btn red\" onclick=\"deleteCard(${id})\">DELETE</button></li>\r\n        </ul>\r\n      </li>`;\r\n    }\r\n  );\r\n\r\n  const markup = markupArray.join('');\r\n  userList.innerHTML = markup;\r\n}\r\n\r\nconst editCard = async id => {\r\n  editableCardId = id;\r\n  formWrapper.classList.add('show');\r\n  editableUserIdx = users.findIndex(el => el.id === id);\r\n  const user = users[editableUserIdx];\r\n  updateValues = user;\r\n  Object.keys(user).forEach(key => {\r\n    if (key !== 'id' && key !== 'company' && key !== 'address') {\r\n      document.getElementById(key).value = user[key];\r\n    }\r\n  });\r\n};\r\n\r\n[...form.elements]\r\n  .map(q => q.name)\r\n  .forEach(key => {\r\n    form[key].addEventListener('change', e => {\r\n      updateValues[key] = e.target.value;\r\n    });\r\n  });\r\n\r\neditBtn.addEventListener('click', async () => {\r\n  loader.classList.add('show-loader');\r\n  await updatePostRequest();\r\n  users[editableUserIdx] = Object.assign(users[editableUserIdx], updateValues);\r\n  renderUsers(users);\r\n  formWrapper.classList.remove('show');\r\n  loader.classList.remove('show-loader');\r\n});\r\n\r\nconst deleteCard = async id => {\r\n  loader.classList.add('show-loader');\r\n  await removeUserRequest(id);\r\n  users.splice(\r\n    users.findIndex(el => el.id === id),\r\n    1\r\n  );\r\n  renderUsers(users);\r\n  loader.classList.remove('show-loader');\r\n};\r\n\r\nfunction removeUserRequest(id) {\r\n  return fetch(`${API_URL}/users/${id}`, {\r\n    method: 'DELETE',\r\n    body: JSON.stringify(updateValues)\r\n  });\r\n}\r\n\r\nfunction updatePostRequest() {\r\n  return fetch(`${API_URL}/users/${editableCardId}`, {\r\n    method: 'PUT',\r\n    body: JSON.stringify(updateValues),\r\n    headers: {\r\n      'Content-type': 'application/json; charset=UTF-8'\r\n    }\r\n  })\r\n    .then(res => res.json())\r\n    .then(data => data);\r\n}\r\n\r\nstartApp();\r\n"],"names":[],"version":3,"file":"index.579125c3.js.map","sourceRoot":"/__parcel_source_root/"}