{"mappings":"AAAA,MAAMA,EAAWC,SAASC,eAAe,SAEzC,IASIC,EACAC,EAVAC,EAAQ,GAWRC,EAAe,GACnB,MAAMC,EAAcN,SAASO,cAAc,sBACrCC,EAAOR,SAASO,cAAc,cAC9BE,EAAUT,SAASO,cAAc,aACjCG,EAASV,SAASO,cAAc,oBAkB7BI,EAAYC,GACnB,MA+BMC,EA/BcD,EAAKE,KAAG,EACxBC,GAACA,EAAEC,KAAEA,EAAIC,SAAEA,EAAQC,MAAEA,EAAKC,QAAEA,EAAOC,MAAEA,KAC/B,sFAEgBJ,oCACAC,yLAOSC,mJAIAC,iJAIAC,sIAIuBL,oFACDA,yDAM9BM,KAAK,IAChCtB,EAASuB,UAAYT,EAgBvB,IAAIL,EAAKe,UACNT,KAAIU,GAAKA,EAAER,OACXS,SAAQC,IACPlB,EAAKkB,GAAKC,iBAAiB,UAAUC,IACnCvB,EAAaqB,GAAOE,EAAEC,OAAOC,YAInCrB,EAAQkB,iBAAiB,SAAOI,UAC9BrB,EAAOsB,UAAUC,IAAI,qBA2BdC,MAAK,8CAAqBhC,IAAkB,CACjDiC,OAAQ,MACRC,KAAMC,KAAKC,UAAUjC,GACrBkC,QAAS,CACP,eAAgB,qCAGjBC,MAAKC,GAAOA,EAAIC,SAChBF,MAAKG,GAAQA,IAjChBvC,EAAMD,GAAmByC,OAAOC,OAAOzC,EAAMD,GAAkBE,GAC/DM,EAAYP,GACZE,EAAY0B,UAAUc,OAAO,QAC7BpC,EAAOsB,UAAUc,OAAO,oCAtExBpC,EAAOsB,UAAUC,IAAI,eACrB,MAAMU,yBATN,MACMI,QAAiBb,MADd,8CAET,GAAIa,EAASC,GACX,aAAaD,EAASL,OAMLO,GACnB7C,EAAQ,IAAIA,KAAUuC,GACtBhC,EAAYP,GACZM,EAAOsB,UAAUc,OAAO,eAmG1BI","sources":["src/index.js"],"sourcesContent":["const userList = document.getElementById('users');\r\nconst API_URL = 'https://jsonplaceholder.typicode.com';\r\nlet users = [];\r\nlet formData = {\r\n  name: '',\r\n  username: '',\r\n  address: '',\r\n  phone: '',\r\n  website: '',\r\n  email: ''\r\n};\r\nlet editableCardId;\r\nlet editableUserIdx;\r\nlet updateValues = {};\r\nconst formWrapper = document.querySelector('.edit-form-wrapper');\r\nconst form = document.querySelector('.edit-form');\r\nconst editBtn = document.querySelector('.edit-btn');\r\nconst loader = document.querySelector('.loader');\r\n\r\nasync function getUsers() {\r\n  const url = `${API_URL}/users`;\r\n  const response = await fetch(url);\r\n  if (response.ok) {\r\n    return await response.json();\r\n  }\r\n}\r\n\r\nasync function startApp() {\r\n  loader.classList.add('show-loader');\r\n  const data = await getUsers();\r\n  users = [...users, ...data];\r\n  renderUsers(users);\r\n  loader.classList.remove('show-loader');\r\n}\r\n\r\nfunction renderUsers(list) {\r\n  const markupArray = list.map(\r\n    ({ id, name, username, phone, website, email }) => {\r\n      return `<li class=\"profile\">\r\n        <div class=\"description\">\r\n          <p class=\"name\">${name}</p>\r\n          <p class=\"tag\">@${username}</p>\r\n         \r\n        </div>\r\n\r\n        <ul class=\"contacts\">\r\n          <li class=\"statsElem\">\r\n            <span class=\"label\">phone</span>\r\n            <span class=\"quantity\">${phone}</span>\r\n          </li>\r\n          <li class=\"statsElem\">\r\n            <span class=\"label\">website</span>\r\n            <span class=\"quantity\">${website}</span>\r\n          </li>\r\n          <li class=\"statsElem\">\r\n            <span class=\"label\">email</span>\r\n            <span class=\"quantity\">${email}</span>\r\n          </li>\r\n        </ul>\r\n        <ul class=\"controls\">\r\n        <li ><button class=\"btn tomato\" onclick=\"editCard(${id})\">EDIT</button></li>\r\n        <li ><button class=\"btn red\" onclick=\"deleteCard(${id})\">DELETE</button></li>\r\n        </ul>\r\n      </li>`;\r\n    }\r\n  );\r\n\r\n  const markup = markupArray.join('');\r\n  userList.innerHTML = markup;\r\n}\r\n\r\nconst editCard = async id => {\r\n  editableCardId = id;\r\n  formWrapper.classList.add('show');\r\n  editableUserIdx = users.findIndex(el => el.id === id);\r\n  const user = users[editableUserIdx];\r\n  updateValues = user;\r\n  Object.keys(user).forEach(key => {\r\n    if (key !== 'id' && key !== 'company' && key !== 'address') {\r\n      document.getElementById(key).value = user[key];\r\n    }\r\n  });\r\n};\r\n\r\n[...form.elements]\r\n  .map(q => q.name)\r\n  .forEach(key => {\r\n    form[key].addEventListener('change', e => {\r\n      updateValues[key] = e.target.value;\r\n    });\r\n  });\r\n\r\neditBtn.addEventListener('click', async () => {\r\n  loader.classList.add('show-loader');\r\n  await updatePostRequest();\r\n  users[editableUserIdx] = Object.assign(users[editableUserIdx], updateValues);\r\n  renderUsers(users);\r\n  formWrapper.classList.remove('show');\r\n  loader.classList.remove('show-loader');\r\n});\r\n\r\nconst deleteCard = async id => {\r\n  loader.classList.add('show-loader');\r\n  await removeUserRequest(id);\r\n  users.splice(\r\n    users.findIndex(el => el.id === id),\r\n    1\r\n  );\r\n  renderUsers(users);\r\n  loader.classList.remove('show-loader');\r\n};\r\n\r\nfunction removeUserRequest(id) {\r\n  return fetch(`${API_URL}/users/${id}`, {\r\n    method: 'DELETE',\r\n    body: JSON.stringify(updateValues)\r\n  });\r\n}\r\n\r\nfunction updatePostRequest() {\r\n  return fetch(`${API_URL}/users/${editableCardId}`, {\r\n    method: 'PUT',\r\n    body: JSON.stringify(updateValues),\r\n    headers: {\r\n      'Content-type': 'application/json; charset=UTF-8'\r\n    }\r\n  })\r\n    .then(res => res.json())\r\n    .then(data => data);\r\n}\r\n\r\nstartApp();\r\n"],"names":["$35da740d59af89ba$var$userList","document","getElementById","$35da740d59af89ba$var$editableCardId","$35da740d59af89ba$var$editableUserIdx","$35da740d59af89ba$var$users","$35da740d59af89ba$var$updateValues","$35da740d59af89ba$var$formWrapper","querySelector","$35da740d59af89ba$var$form","$35da740d59af89ba$var$editBtn","$35da740d59af89ba$var$loader","$35da740d59af89ba$var$renderUsers","list","markup","map","id","name","username","phone","website","email","join","innerHTML","elements","q","forEach","key","addEventListener","e","target","value","async","classList","add","fetch","method","body","JSON","stringify","headers","then","res","json","data","Object","assign","remove","response","ok","$35da740d59af89ba$var$getUsers","$35da740d59af89ba$var$startApp"],"version":3,"file":"index.9882f356.js.map"}